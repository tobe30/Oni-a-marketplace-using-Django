{% load static %}
<!DOCTYPE html>
<html lang="zxx">

<!-- Mirrored from templates.hibootstrap.com/tezor/default/index-2.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 06 Jul 2024 22:45:48 GMT -->
<head>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">

    <!-- Lightbox CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/lightbox.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/fonts/remixicon.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/owl.carousel.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/owl.theme.default.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/magnific-popup.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/meanmenu.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
<link rel="stylesheet" href="{% static 'assets/bootstrap-icons/bootstrap-icons.css' %}">
<link rel="stylesheet" href="{% static 'assets/swiper/swiper-bundle.min.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}">

<link rel="stylesheet" href="{% static 'assets/css/theme-dark.css' %}">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<title>Oni - Marketplace</title>
<link rel="icon" type="image/png" href="{% static 'assets/images/onitsha.png' %}">
</head>
<body>

<div class="preloader">
<div class="spinner">
<div class="dot1"></div>
<div class="dot2"></div>
</div>
</div>


<header id="header" class="header fixed-top d-flex align-items-center">

  <div class="d-flex align-items-center justify-content-between">
    <a href="{% url 'core:index'%}" class="logo d-flex align-items-center">
      <img src="{% static 'assets/images/onitsha.png' %}" alt="">
     
    </a>

    <a href="#" data-bs-toggle="dropdown">
    <i class="bi bi-grid toggle-sidebar-btn"></i>
  </a>

  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
    <li class="dropdown-header">
      All Categories
    </li>
    {% for c in category %}
    <li>
      
      <hr class="dropdown-divider">
      </a>
    </li>

    <li class="notification-item">
      <div>
        <a href="{% url 'core:cat-shop' c.cid %}">
        <h4>{{c.title}}</h4>
        </a>
      </div>
    </li>



  {% endfor %}

    <li>
      <hr class="dropdown-divider">
    </li>

  </ul><!-- End Notification Dropdown Items -->
  </div><!-- End Logo -->

  <div class="search-bar">
    <form class="search-form d-flex align-items-center" method="get" action="{% url 'core:search' %}">
      <input type="text" name="q" placeholder="Search" title="Enter search keyword">
      <button type="submit"><i class="bi bi-search"></i></button>
    </form>
  </div><!-- End Search Bar -->

  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">

      <li class="nav-item d-block d-lg-none">
        <a class="nav-link nav-icon search-bar-toggle " href="#">
          <i class="bi bi-search"></i>
        </a>
      </li><!-- End Search Icon-->
      {% if request.user.is_authenticated %}
      <li class="nav-item dropdown">
        
        <a class="nav-link nav-icon" href="{% url 'core:notifications' %}" >
          <i class="bi bi-bell"></i>
          <span class="badge bg-success badge-number">{{ notifications.count }}</span>
        </a><!-- End Notification Icon -->


      </li><!-- End Notification Nav -->

      <li class="nav-item">

        <a class="nav-link nav-icon" href="{% url 'chat:new' %}">
          <i class="bi bi-chat-left-text"></i>
          <span class="badge bg-success badge-number"></span>
        </a><!-- End Messages Icon -->


      </li><!-- End Messages Nav -->
      
      <li class="nav-item dropdown pe-3">

        <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
          <img src="{{request.user.profile.image.url}}" alt="Profile" style="width: 35px; height: 30px;"  class="rounded-circle">
          <span class="d-none d-md-block dropdown-toggle ps-2">{{ request.user.username}}</span>
        </a><!-- End Profile Iamge Icon -->

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
          <li class="dropdown-header">
            <h6>{{ request.user.username}}</h6>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'core:dashboard'%}">
              <i class="bi bi-person"></i>
              <span>My Profile</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'core:settings' %}">
              <i class="bi bi-gear"></i>
              <span>Account Settings</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'core:following' %}">
              <i class="bi bi-people"></i>
              <span>Following</span>
            </a>
          </li>
          
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'items:sell' %}">
              <i class="bi bi-people"></i>
              <span>Sell</span>
            </a>
          </li>          

          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{% url 'userauths:sign-out' %}">
              <i class="bi bi-box-arrow-right"></i>
              <span>Sign Out</span>
            </a>
          </li>

        </ul><!-- End Profile Dropdown Items -->
      </li><!-- End Profile Nav -->
      {% else %}
      <a href="{% url 'userauths:sign-in' %}" class="px-3">sign-in</a>
      {% endif %}

    </ul>
  </nav><!-- End Icons Navigation -->

</header><!-- End Header -->
<!-- alert start -->
<script>
  {% for message in messages %}
  Swal.fire({
      title: '{{message}}',
      text: '{{message.tags}}',
      icon: '{{message.tags}}',
      confirmButtonText: 'OK',
      timer:3000
  });
  {% endfor %}
</script>

{% block content %}
{% endblock content %}

<!--Footer section-->

  

<footer class="footer-14398">
      
    <div class="container">
      <div class="row mb-5">
        <div class="col-md-3">
          <a href="#" class="footer-site-logo">Onitsha</a>
          <p>The Most Popular market Place</p>
        </div>
        <div class="col-md-2 ml-auto">
          <h3>Shop</h3>
          <ul class="list-unstyled links">
            <li><a href="#">Sell on onitsha</a></li>
            <li><a href="#">Become a vendor</a></li>
            <li><a href="#">Categories</a></li>
          </ul>
        </div>
        <div class="col-md-2 ml-auto">
          <h3>Need help</h3>
          <ul class="list-unstyled links">
            <li><a href="#">Chat with us</a></li>
            <li><a href="#">Contact us</a></li>
           
            <li><a href="#">Help Center</a></li>
          </ul>
        </div>
        <div class="col-md-2 ml-auto">
          <h3>About</h3>
          <ul class="list-unstyled links">
            <li><a href="#">About us</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Tearms & Condition</a></li>
            <li><a href="#">Contacts</a></li>
          </ul>
        </div>
      </div>
  
      <div class="row mb-4">
        <div class="col-12 pb-4">
          <div class="line"></div>
        </div>
        <div class="col-md-6 text-md-left">
          <ul class="list-unstyled link-menu nav-left">
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms &amp; Conditions</a></li>
            <li><a href="#">Code of Conduct</a></li>
          </ul>
        </div>
        <div class="col-md-6 text-md-right">
          <ul class="list-unstyled social right">
            <li><a href="#"><i class="bi bi-twitter"></i></span></a></li>
            <li><a href="#"><i class="bi bi-facebook"></i></i></a></li>
            <li><a href="#"><i class="bi bi-instagram"></i></span></a></li>
            <li><a href="#"><i class="bi bi-youtube"></i></span></a></li>
          </ul>
        </div>
      </div>
  
      <div class="row">
        <div class="col-md-7">
          <p><small>Â© <script>document.write(new Date().getFullYear())</script> Onitsha. All Rights Reserved by
          </small></p>
        </div>
      </div>
    </div>
    
  
  </footer>
  
  
  <script src="{% static 'assets/js/jquery.min.js' %}"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
        const priceSlider = document.getElementById('price-slider');
        const priceDisplay = document.getElementById('slider-range-value2');

        if (priceSlider && priceDisplay) {
            // Update the price display in real-time as the slider changes
            priceSlider.addEventListener('input', function () {
                priceDisplay.innerText = this.value;
            });

            // Automatically submit the form when the slider stops changing
            priceSlider.addEventListener('change', function () {
                document.getElementById('price-form').submit();
            });
        }
    });
</script>
    
    
  <script>
    document.querySelectorAll('.save-form').forEach(form => {
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission
    
            const formData = new FormData(this);
            const productId = this.querySelector('[name="csrfmiddlewaretoken"]').value;
            const csrfToken = formData.get('csrfmiddlewaretoken');
    
            fetch(this.action, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken,
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams(formData).toString()
            })
            .then(response => response.json())
            .then(data => {
                if (data.saved) {
                    this.querySelector('.pd-detail__click-wrap').innerHTML = `
                        <i class="bi bi-bookmark-fill u-s-m-r-6"></i>
                        <span class="pd-detail__click-count">Saved</span>
                    `;
                } else {
                    this.querySelector('.pd-detail__click-wrap').innerHTML = `
                        <i class="bi bi-bookmark u-s-m-r-6"></i>
                        <span class="pd-detail__click-count">Save</span>
                    `;
                }
            })
            .catch(error => console.error('Error:', error));
        });
    });
    </script>

  <script>
    document.querySelectorAll('.save-button').forEach(button => {
        button.addEventListener('click', function (event) {
            event.preventDefault(); // Prevent the default form submission

            const productId = this.getAttribute('data-product-id');
            const csrfToken = document.querySelector('[name="csrfmiddlewaretoken"]').value;

            fetch(`/sell/saved/${productId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ product_id: productId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.saved) {
                    this.innerHTML = '<i class="bi bi-bookmark-fill"></i>';  // Filled bookmark icon
                } else {
                    this.innerHTML = '<i class="bi bi-bookmark"></i>';  // Empty bookmark icon
                }
               // alert(data.message);  // Display the success message
            })
            .catch(error => console.error('Error:', error));
        });
    });
</script>

  <script>
    $(document).ready(function() {
        // Handle form submission via AJAX for both index and product detail pages
        $('.like-form').on('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission
            var form = $(this);
            var favCounter = form.find('.fav-counter');
            var pdDetailLike = form.find('.pd-detail__like'); // Use the new class for product detail page
            var productId = favCounter.length ? favCounter.data('product-id') : pdDetailLike.data('product-id');
            
            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(),
                success: function(response) {
                    // Toggle the like class based on which element is found
                    if (favCounter.length) {
                        if (response.liked) {
                            favCounter.addClass('liked');
                        } else {
                            favCounter.removeClass('liked');
                        }
                        favCounter.find('.count').text(response.like_count);
                    }
                    if (pdDetailLike.length) {
                        if (response.liked) {
                            pdDetailLike.addClass('liked');
                        } else {
                            pdDetailLike.removeClass('liked');
                        }
                        pdDetailLike.find('.count').text(response.like_count);
                    }
                },
                error: function(xhr, status, error) {
                    console.error("AJAX Error:", status, error);
                }
            });
        });
    });

</script>

  
  <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
  <!-- Lightbox JS -->
  <script src="{% static 'assets/js/lightbox.min.js' %}"></script>
  
  <script src="{% static 'assets/js/magnific-popup.min.js' %}"></script>
  
  <script src="{% static 'assets/js/meanmenu.min.js' %}"></script>
  
  <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
  
  <script src="{% static 'assets/js/countdown.min.js' %}"></script>
  
  <script src="{% static 'assets/js/ajaxchimp.min.js' %}"></script>
  
  <script src="{% static 'assets/js/form-validator.min.js' %}"></script>
  
  <script src="{% static 'assets/js/contact-form-script.js' %}"></script>
  <script src="{% static 'assets/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'assets/js/custom.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>
  <script src="{% static 'assets/js/function.js' %}"></script>

  <script async src="{% static 'assets/js/svg-loader.js' %}"></script>
  
  <script>
    $(document).ready(function() {
        var wrapper = $('#thumbnails-wrapper');
        var maxScrollLeft = wrapper[0].scrollWidth - wrapper[0].clientWidth;
        var scrollAmount = 200;

        $('#next-btn').click(function() {
            wrapper.animate({scrollLeft: '+=' + scrollAmount}, 500);
        });

        $('#prev-btn').click(function() {
            wrapper.animate({scrollLeft: '-=' + scrollAmount}, 500);
        });
    });
</script>


  </body>
  
  </html>
<!--
<script>
    $(document).ready(function() {
        // Handle form submission via AJAX
        $('.like-form').on('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission
            var form = $(this);
            var favCounter = form.find('.fav-counter');
            var productId = favCounter.data('product-id');
            
            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(),
                success: function(response) {
                    // Toggle the like class
                    if (response.liked) {
                        favCounter.addClass('liked');
                    } else {
                        favCounter.removeClass('liked');
                    }
                    // Update the like count
                    favCounter.find('.count').text(response.like_count);
                },
                error: function(xhr, status, error) {
                    console.error("AJAX Error:", status, error);
                }
            });
        });
    });
    </script>  
-->