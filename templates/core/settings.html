{% extends "include/base.html"%}

{% block content%}
{% load static %}
{% load humanize %}

<!-- settings.html -->

<div id="content-wrapper">
    <div class="container-fluid pb-0">
        <div class="video-block section-padding">
            <div class="main-items">
                <div class="row justify-content-md-center">
                    <div class="messages text-center col-md-12 ">
                        Settings
                        <hr>
                    </div>
                </div>
                <div class="my-all-lisitngs">
                    <div class="row justify-content-md-center">
                        <div class="col-lg-12 col-sm-12">
                            <div class="help-tabs">
                                <ul class="nav nav-tabs" id="myTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Change password</a>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">Delete account</a>
                                    </li>
                                </ul>
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                                        <form method="post">
                                            {% csrf_token %}
                                    
                                            
                                            <div class="feedback pm-30">
                                                <div class="email-input">
                                                    <div class="midemail">																												 
                                                        <h6>Change Password</h6>
                                                    </div>
                                                    
                                                    <!-- Display error for old password -->
                                                    {% if password_form.old_password.errors %}
                                                        <div class="alert alert-danger alert-dismissible fade show" id="password-error-alert">
                                                            {{ password_form.old_password.errors }}
                                                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                                        </div>
                                                    {% endif %}
                                                    
                                                    <div class="input-pss change-p">
                                                        {{ password_form.old_password }} 
                                                    </div>
                                        
                                                    <!-- Display new password fields -->
                                                    <div class="input-pss change-p">
                                                        {{ password_form.new_password1 }}
                                                    </div>
                                        
                                                    <div class="input-pss change-p">
                                                        {{ password_form.new_password2 }}
                                                    </div>
                                                    
                                                    <!-- Render the password change button -->
                                                    <div class="prcy-btn change-btn-pass">
                                                        <button type="submit" name="change_password" class="btn btn-fuchsia mt-3">Save Changes</button>
                                                    </div>
                                                </div>															
                                            </div>
                                        </form>
                                    </div>
                                    <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="feedback pm-30">
                                                <div class="email-input">
                                                    <div class="midemail">																												 
                                                        <h6>Deactivate Account</h6>
                                                    </div>
                                                    <div class="input-pss change-p">
                                                        {{ deactivate_form.as_p }}  
                                                    </div>				
                                                    <!-- Render the deactivate account form -->
                                                    <div class="prcy-btn change-btn-pass">
                                                        <button type="submit" name="deactivate_account" class="btn btn-fuchsia mt-3">Deactivate Now</button>
                                                    </div>
                                                </div>															
                                            </div>	
                                        </form>	
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>									 
                </div>
            </div>
        </div>
    </div>
</div>




<script>
    // Wait for the document to load
    document.addEventListener("DOMContentLoaded", function () {
        // Select the alert element
        var alert = document.getElementById("password-error-alert");

        if (alert) {
            // Set a timeout to hide the alert after 5 seconds (5000 milliseconds)
            setTimeout(function () {
                alert.classList.remove("show"); // Hide the alert using Bootstrap's `fade` and `show` classes
                alert.classList.add("fade");    // Adds the fade-out effect
            }, 5000);  // 5 seconds
        }
    });
</script>

{% endblock content %}